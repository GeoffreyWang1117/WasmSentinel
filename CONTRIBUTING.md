# è´¡çŒ®æŒ‡å—

æ„Ÿè°¢æ‚¨å¯¹ WASM-ThreatDetector é¡¹ç›®çš„å…³æ³¨ï¼æˆ‘ä»¬æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®ã€‚

## ğŸ¤ å¦‚ä½•è´¡çŒ®

### æŠ¥å‘Šé—®é¢˜

å¦‚æœæ‚¨å‘ç°äº† bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æ£€æŸ¥ [Issues](https://github.com/wasm-threat-detector/wasm-threat-detector/issues) ç¡®ä¿é—®é¢˜å°šæœªè¢«æŠ¥å‘Š
2. åˆ›å»ºæ–° Issueï¼ŒåŒ…å«ï¼š
   - è¯¦ç»†çš„é—®é¢˜æè¿°
   - é‡ç°æ­¥éª¤
   - é¢„æœŸè¡Œä¸ºå’Œå®é™…è¡Œä¸º
   - ç³»ç»Ÿç¯å¢ƒä¿¡æ¯
   - ç›¸å…³æ—¥å¿—

### æäº¤ä»£ç 

1. **Fork é¡¹ç›®**
   ```bash
   git clone https://github.com/your-username/wasm-threat-detector.git
   cd wasm-threat-detector
   ```

2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **è¿›è¡Œæ›´æ”¹**
   - éµå¾ªé¡¹ç›®ä»£ç é£æ ¼
   - æ·»åŠ å¿…è¦çš„æµ‹è¯•
   - æ›´æ–°æ–‡æ¡£

4. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: add new detection rule for XXX"
   ```

5. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/your-feature-name
   ```

6. **åˆ›å»º Pull Request**

## ğŸ“ ä»£ç è§„èŒƒ

### Go ä»£ç è§„èŒƒ

- ä½¿ç”¨ `go fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `go vet` æ£€æŸ¥ä»£ç 
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šï¼Œç‰¹åˆ«æ˜¯å¯¼å‡ºçš„å‡½æ•°å’Œç±»å‹
- é”™è¯¯å¤„ç†è¦æ˜ç¡®å’Œä¸€è‡´

```go
// å¥½çš„ç¤ºä¾‹
func LoadRule(name, path string) error {
    if name == "" {
        return fmt.Errorf("rule name cannot be empty")
    }
    
    // ... å®ç°
    return nil
}
```

### Rust ä»£ç è§„èŒƒ

- ä½¿ç”¨ `cargo fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `cargo clippy` æ£€æŸ¥ä»£ç è´¨é‡
- ä¼˜å…ˆä½¿ç”¨å®‰å…¨çš„ Rust ä»£ç ï¼Œè°¨æ…ä½¿ç”¨ `unsafe`
- ä¸ºå…¬å…±å‡½æ•°æ·»åŠ æ–‡æ¡£æ³¨é‡Š

```rust
/// æ£€æµ‹è¿›ç¨‹äº‹ä»¶ä¸­çš„å¨èƒ
/// 
/// # Arguments
/// * `event` - è¿›ç¨‹äº‹ä»¶æ•°æ®
/// 
/// # Returns
/// * å¨èƒçº§åˆ« (0-10)
fn detect_process_threat(event: &Value) -> i32 {
    // ... å®ç°
}
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# Go æµ‹è¯•
cd host
go test ./...

# Rust æµ‹è¯•
cd rules/suspicious-shell
cargo test

# é›†æˆæµ‹è¯•
./scripts/test.sh
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
# Go æµ‹è¯•è¦†ç›–ç‡
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out

# Rust æµ‹è¯•è¦†ç›–ç‡
cargo tarpaulin --out Html
```

## ğŸ“– æ–‡æ¡£

### æ–‡æ¡£æ›´æ–°

- API å˜æ›´éœ€è¦æ›´æ–°ç›¸åº”æ–‡æ¡£
- æ–°åŠŸèƒ½éœ€è¦æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
- ä½¿ç”¨ Markdown æ ¼å¼ç¼–å†™æ–‡æ¡£

### æ–‡æ¡£ç»“æ„

```
docs/
â”œâ”€â”€ api.md              # API æ–‡æ¡£
â”œâ”€â”€ deployment.md       # éƒ¨ç½²æŒ‡å—
â”œâ”€â”€ development.md      # å¼€å‘æŒ‡å—
â”œâ”€â”€ rules/             # è§„åˆ™æ–‡æ¡£
â”‚   â”œâ”€â”€ writing-rules.md
â”‚   â””â”€â”€ examples/
â””â”€â”€ troubleshooting.md  # æ•…éšœæ’é™¤
```

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### ä¾èµ–å®‰è£…

```bash
# Go 1.19+
go version

# Rust 1.70+
rustc --version
rustup target add wasm32-wasi

# å¼€å‘å·¥å…·
go install golang.org/x/tools/cmd/goimports@latest
cargo install cargo-tarpaulin
```

### IDE é…ç½®

æ¨èä½¿ç”¨ VS Code å¹¶å®‰è£…ä»¥ä¸‹æ’ä»¶ï¼š
- Go å®˜æ–¹æ’ä»¶
- Rust Analyzer
- WASM æ’ä»¶

## ğŸ¯ è´¡çŒ®ç±»å‹

### æ ¸å¿ƒåŠŸèƒ½

- **äº‹ä»¶æ”¶é›†å™¨**ï¼šæ–°çš„äº‹ä»¶æºï¼ˆæ–‡ä»¶ç›‘æ§ã€ç½‘ç»œæµé‡ç­‰ï¼‰
- **Wasm å¼•æ“**ï¼šæ€§èƒ½ä¼˜åŒ–ã€æ–°ç‰¹æ€§æ”¯æŒ
- **è¾“å‡ºå¤„ç†å™¨**ï¼šæ–°çš„è¾“å‡ºæ ¼å¼æˆ–é›†æˆ

### æ£€æµ‹è§„åˆ™

æˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿æ–°çš„æ£€æµ‹è§„åˆ™è´¡çŒ®ï¼š

1. **æ¶æ„è½¯ä»¶æ£€æµ‹**
2. **ç½‘ç»œå…¥ä¾µæ£€æµ‹**
3. **æƒé™æå‡æ£€æµ‹**
4. **æ•°æ®å¤–æ³„æ£€æµ‹**
5. **åˆè§„æ€§æ£€æŸ¥**

### è§„åˆ™è´¡çŒ®æŒ‡å—

1. åˆ›å»ºè§„åˆ™ç›®å½•ï¼š`rules/your-rule-name/`
2. å®ç°æ£€æµ‹é€»è¾‘
3. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
4. ç¼–å†™è§„åˆ™æ–‡æ¡£
5. æä¾›ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹è§„åˆ™ç»“æ„

```
rules/malware-detection/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â””â”€â”€ lib.rs
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ integration_tests.rs
â”œâ”€â”€ README.md
â””â”€â”€ examples/
    â””â”€â”€ test_events.json
```

## ğŸ“Š æ€§èƒ½è€ƒè™‘

### æ€§èƒ½è¦æ±‚

- Wasm è§„åˆ™æ‰§è¡Œæ—¶é—´ < 1ms
- å†…å­˜ä½¿ç”¨ < 10MB per rule
- CPU ä½¿ç”¨ç‡ < 5% å¹³å‡è´Ÿè½½

### æ€§èƒ½æµ‹è¯•

```bash
# æ€§èƒ½åŸºå‡†æµ‹è¯•
go test -bench=. ./internal/engine/
cargo bench
```

## ğŸ”’ å®‰å…¨è€ƒè™‘

### å®‰å…¨å®¡æŸ¥

æ‰€æœ‰æ¶‰åŠå®‰å…¨é€»è¾‘çš„ä»£ç éƒ½éœ€è¦ï¼š

1. å®‰å…¨ä»£ç å®¡æŸ¥
2. é™æ€åˆ†ææ£€æŸ¥
3. æ¸—é€æµ‹è¯•ï¼ˆå¦‚é€‚ç”¨ï¼‰

### å®‰å…¨æœ€ä½³å®è·µ

- è¾“å…¥éªŒè¯å’Œæ¸…ç†
- é¿å…ä»£ç æ³¨å…¥
- æœ€å°æƒé™åŸåˆ™
- å®‰å…¨çš„é»˜è®¤é…ç½®

## ğŸ–ï¸ è´¡çŒ®è€…è®¤å¯

### è´¡çŒ®è€…ç±»å‹

- **æ ¸å¿ƒç»´æŠ¤è€…**ï¼šé•¿æœŸè´¡çŒ®è€…ï¼Œå…·æœ‰åˆå¹¶æƒé™
- **è§„åˆ™ä½œè€…**ï¼šç¼–å†™å’Œç»´æŠ¤æ£€æµ‹è§„åˆ™
- **æ–‡æ¡£è´¡çŒ®è€…**ï¼šæ”¹è¿›æ–‡æ¡£å’Œç¤ºä¾‹
- **æµ‹è¯•è´¡çŒ®è€…**ï¼šæ·»åŠ æµ‹è¯•ç”¨ä¾‹å’Œä¿®å¤ bug
- **ç¤¾åŒºæ”¯æŒè€…**ï¼šå›ç­”é—®é¢˜ï¼Œå¸®åŠ©æ–°ç”¨æˆ·

### è®¤å¯æ–¹å¼

- åœ¨ README ä¸­åˆ—å‡ºè´¡çŒ®è€…
- ç‰¹æ®Šè´¡çŒ®è€…è·å¾— GitHub å¾½ç« 
- å¹´åº¦è´¡çŒ®è€…å¥–åŠ±

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub Issues**: æŠ€æœ¯é—®é¢˜å’Œ bug æŠ¥å‘Š
- **GitHub Discussions**: åŠŸèƒ½è®¨è®ºå’Œç¤¾åŒºäº¤æµ
- **Email**: security@wasm-threat-detector.orgï¼ˆå®‰å…¨ç›¸å…³ï¼‰

## ğŸ“‹ Pull Request æ£€æŸ¥æ¸…å•

æäº¤ PR å‰è¯·ç¡®ä¿ï¼š

- [ ] ä»£ç éµå¾ªé¡¹ç›®è§„èŒƒ
- [ ] æ·»åŠ äº†é€‚å½“çš„æµ‹è¯•
- [ ] æµ‹è¯•å…¨éƒ¨é€šè¿‡
- [ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£
- [ ] æäº¤ä¿¡æ¯æ¸…æ™°æ˜ç¡®
- [ ] å·²ç­¾ç½² CLAï¼ˆå¦‚éœ€è¦ï¼‰

## ğŸ”„ å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬è§„åˆ™

æˆ‘ä»¬ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼š
- `MAJOR.MINOR.PATCH`
- å‘åä¸å…¼å®¹çš„ API å˜æ›´ï¼šMAJOR
- å‘åå…¼å®¹çš„åŠŸèƒ½å¢åŠ ï¼šMINOR
- å‘åå…¼å®¹çš„ bug ä¿®å¤ï¼šPATCH

### å‘å¸ƒå‘¨æœŸ

- **ç¨³å®šç‰ˆæœ¬**ï¼šæ¯æœˆå‘å¸ƒ
- **å®‰å…¨æ›´æ–°**ï¼šæŒ‰éœ€ç«‹å³å‘å¸ƒ
- **é¢„è§ˆç‰ˆæœ¬**ï¼šæ¯å‘¨å‘å¸ƒ

æ„Ÿè°¢æ‚¨çš„è´¡çŒ®ï¼ğŸš€
